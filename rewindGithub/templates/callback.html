{% extends 'base.html' %}
{% load static %}
{% block title %}
GitHub Rewind
{% endblock %}

{% block content %}
<div class="overflow-x-hidden bg-cover bg-fixed bg-center" style="background-image: url({{ avatar_url }})">
  <!-- splash screen -->
  <!-- <div class="w-screen h-screen bg-gray-950 bg-opacity-50 backdrop-blur-2xl fixed flex items-center justify-center z-50" id="splash">

    </div> -->
  <div class="h-screen w-screen space-y-10 overflow-y-auto bg-opacity-50 py-10 backdrop-blur-2xl lg:px-20 2xl:px-28"
    id="tsparticles">
    <div
      class="flex w-full flex-col items-center justify-center space-y-5 rounded-xl px-11 lg:flex-row lg:space-x-2 lg:space-y-0 lg:px-11">
      <div class="flex h-1/2 w-full items-center justify-center rounded-xl bg-cover bg-center lg:h-fit lg:w-1/3">
        <img src="{{ avatar_url }}"
          class="animate-on-scroll h-56 w-56 rounded-2xl border-2 border-gray-600 shadow-xl shadow-stone-800 transition-all duration-300 hover:rotate-6 lg:h-64 lg:w-64"
          alt="" id="animatedElement" />
        <!-- <img 
        src="../static/images/pfp.png"
          class="animate-on-scroll h-56 w-56 rounded-2xl border-2 border-gray-600 shadow-xl shadow-stone-800 transition-all duration-300 hover:rotate-6 lg:h-64 lg:w-64"
          alt="" id="animatedElement" /> -->
      </div>
      <div
        class="animate-on-scroll-greeting w-full rounded-xl border-2 border-gray-700 bg-gray-950 bg-opacity-50 px-8 py-14 text-center text-white opacity-0 shadow-black transition-all duration-300 hover:bg-opacity-30 hover:py-20 hover:text-black hover:shadow-2xl lg:h-fit lg:w-2/3"
        id="greeting animated-element">
        <h1 class="mb-4 text-3xl font-semibold lg:text-4xl">
          Back in action, DeeptejD! ğŸ”¥
        </h1>
        <p class="mb-5 text-lg font-medium lg:text-xl">
          Ready to unfold your GitHub 2023 coding journey?? ğŸ’ª
        </p>
        <p class="text-xs font-light">
          ps: clicking on some parts of the page may surprise u ğŸ¤«
        </p>
      </div>
    </div>

    <div
      class="flex w-full flex-col items-center justify-center space-y-5 rounded-xl px-11 lg:flex-row lg:space-x-2 lg:space-y-0 lg:px-11">
      <div
        class="animate-on-scroll-commit shine-container relative h-full w-full overflow-hidden rounded-xl border-2 border-green-700 bg-green-500 bg-opacity-40 px-8 py-11 opacity-0 transition-all duration-500 hover:bg-opacity-80 hover:shadow-2xl lg:w-2/3"
        id="animated-element">
        <h1 class="mb-4 text-3xl font-semibold">
          In 2023 you've unleashed 30 commits into the wild! ğŸŒ¿
        </h1>
        <p class="mb-6 text-lg font-medium md:mb-4">
          That's more code than a caffeinated squirrel on rollerblades. Keep
          the wheels turning! ğŸ’ª
        </p>
        <div class="flex items-center justify-center md:items-start md:justify-start">
          <button
            class="text-md h-fit w-fit rounded-2xl border-2 border-green-300 bg-green-400 bg-opacity-50 p-5 text-center font-bold text-green-950 shadow-2xl transition-all duration-300 hover:-translate-y-1 hover:translate-x-1">
            Share!
          </button>
        </div>
      </div>
      <button class="flex h-full w-full items-center justify-center lg:w-1/3" id="confetti-button">
        <img src="{% static 'images/Gold.png' %}" alt="Gold"
          class="animate-on-scroll-commit-badge h-56 w-56 rounded-2xl opacity-0 shadow-lg transition-all duration-500 hover:scale-105 hover:shadow-yellow-400 lg:h-64 lg:w-64"
          id="animated-badge animatedElement" />
      </button>
    </div>
    <div
      class="scroll-into-view flex h-4/5 w-full flex-col items-center justify-center space-y-5 rounded-xl px-11 xl:h-2/3 xl:flex-row xl:space-x-4 xl:space-y-0 xl:py-11"
      id="chart">
      <div
        class="child-element grid h-full w-full grid-cols-3 grid-rows-4 gap-3 rounded-2xl px-11 py-2 md:px-44 lg:w-3/4 lg:px-11 xl:w-1/2 xl:px-20 2xl:px-36">
        <div
          class="col-span-1 col-start-1 row-start-4 rounded-xl border-2 border-amber-800 bg-gradient-to-b from-yellow-700 to-amber-900">
        </div>
        <div class="col-span-1 col-start-1 row-span-1 row-start-3 rounded-lg flex items-center justify-center"><img
            src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/{{ top_langs.2.0|lower }}/{{ top_langs.2.0|lower }}-original.svg"
            class="w-28 h-28 items-center" alt="{{ top_langs.2.0 }}" /></div>
        <div
          class="col-span-1 col-start-2 row-span-3 row-start-2 rounded-xl border-2 border-yellow-400 bg-gradient-to-b from-yellow-300 to-yellow-700">
        </div>
        <div class="col-span-1 col-start-2 row-span-1 row-start-1 rounded-lg flex items-center justify-center"><img
            src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/{{ top_langs.0.0|lower }}/{{ top_langs.0.0|lower }}-original.svg"
            class="w-28 h-28 items-center" alt="{{ top_langs.0.0 }}" /></div>
        <div
          class="col-span-1 col-start-3 row-span-2 row-start-3 rounded-xl border-2 border-gray-500 bg-gradient-to-b from-gray-200 to-gray-600">
        </div>
        <div class="col-span-1 col-start-3 row-span-1 row-start-2 rounded-lg flex items-center justify-center"><img
            src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/{{ top_langs.1.0|lower }}/{{ top_langs.1.0|lower }}-original.svg"
            class="w-28 h-28 items-center" alt="{{ top_langs.1.0 }}" /></div>
      </div>
      <div
        class="child-element delay-1 flex h-fit w-full flex-col rounded-2xl border-2 border-yellow-300 bg-amber-300 bg-opacity-35 px-6 py-11 shadow-2xl backdrop-blur-2xl transition-all duration-500 hover:bg-opacity-100 xl:w-1/3 2xl:w-1/2">
        <h1 class="mb-4 text-3xl font-semibold">
          You've clung to these 3 like a koala to a eucalyptus tree! ğŸ¨
        </h1>
        <p class="mb-4 text-lg font-medium">
          You deserve a medal... or at least a cookie! ğŸª
        </p>
        <p class="mb-6 text-xs md:mb-4">
          PS: HTML is still not a programming language
        </p>
        <div class="flex items-center justify-center md:items-start md:justify-start">
          <button
            class="text-md h-fit w-fit rounded-2xl border-2 border-yellow-200 bg-yellow-400 bg-opacity-50 p-5 text-center font-bold text-yellow-950 shadow-2xl transition-all duration-300 hover:-translate-y-1 hover:translate-x-1">
            Share!
          </button>
        </div>
      </div>
    </div>
    <!-- stargazer -->
    <div
      class="scroll-into-view flex w-full flex-col items-center justify-center space-y-5 rounded-xl px-11 lg:flex-row lg:space-x-2 lg:space-y-0 lg:px-11"
      id="stargazer">
      <div class="h-full w-full lg:w-1/3">
        <button class="child-element flex h-full w-full items-center justify-center" id="confetti-button">
          <img src="{% static 'images/Gold.png' %}" alt="Gold"
            class="animate-on-scroll-commit-badge h-56 w-56 rounded-2xl opacity-0 shadow-lg transition-all duration-500 hover:scale-105 hover:shadow-yellow-400 lg:h-64 lg:w-64"
            id="animated-badge animatedElement" />
        </button>
      </div>
      <div
        class="child-element delay-1 border-yellow-100 text-yellow-100 h-full w-full overflow-hidden rounded-xl border-2 bg-gray-950 bg-opacity-40 px-8 py-11 opacity-0 transition-all duration-500 hover:bg-opacity-80 hover:shadow-2xl lg:w-2/3">
        <h1 class="mb-4 text-3xl font-semibold">
          In 2023 you went stargazing! âœ¨
        </h1>
        <p class="mb-6 text-lg font-medium md:mb-4">
          Sprinkling stardust on a constellation of repositories! ğŸ¤©
        </p>
        <p class="text-sm mb-4 text-gray-500">ps: i tried adding a background of stars just for this part but i couldn't
          so just imagine it exists here</p>
        <div class="flex items-center justify-center md:items-start md:justify-start">
          <button
            class="text-md h-fit w-fit rounded-2xl border-2 border-yellow-200 bg-gray-950 bg-opacity-50 p-5 text-center font-bold text-yellow-100 shadow-2xl transition-all duration-300 hover:-translate-y-1 hover:translate-x-1">
            Share!
          </button>
        </div>
      </div>

    </div>
    <div class="px-5 w-full">
      <div
        class="w-full border-2 py-6 border-gray-600 bg-gray-950 bg-opacity-30 backdrop-blur-2xl text-white rounded-2xl h-1/3 flex flex-row divide-x-2 divide-gray-500 p-4">
        <div class="w-1/2 h-full flex flex-col justify-center px-5">
          <div class="divide-y-2 divide-gray-600">
            <h1 class="text-xl font-bold mb-4">Made by @DeeptejD ğŸ‘€</h1>
            <div class="pt-4">
              <p>If you liked my work consider supporting me on GitHub as it will help me create more! ğŸ’–</p>
            </div>
          </div>
        </div>
        <div></div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/@tsparticles/confetti@3.0.2/tsparticles.confetti.bundle.min.js"></script>
  <script>
    function loadParticles(originX, originY) {
      const defaults = {
        spread: 360,
        ticks: 50,
        gravity: 0,
        decay: 0.9,
        startVelocity: 30,
        shapes: ["star"],
        colors: ["FFE400", "FFBD00", "E89400", "FFCA6C", "FDFFB8"],
        origin: {
          x: originX / window.innerWidth,
          y: originY / window.innerHeight,
        },
      };

      function shoot() {
        confetti({
          ...defaults,
          particleCount: 40,
          scalar: 1.2,
          shapes: ["star"],
        });

        confetti({
          ...defaults,
          particleCount: 10,
          scalar: 0.75,
          shapes: ["circle"],
        });
      }

      setTimeout(shoot, 0);
      setTimeout(shoot, 100);
    }

    document
      .getElementById("confetti-button")
      .addEventListener("click", function () {
        const originX = event.clientX;
        const originY = event.clientY;
        loadParticles(originX, originY);
      });

    leaderboardHasRun = false;

    // intersection observer
    function handleIntersection(entries, observer) {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('in-view');
          const end = Date.now() + 1 * 1000;

          if (!leaderboardHasRun) {
            // go Buckeyes!
            const colors = ["#bb0000", "#ffffff"];

            (function frame() {
              confetti({
                particleCount: 2,
                angle: 60,
                spread: 55,
                origin: { x: 0 },
                colors: colors,
              });

              confetti({
                particleCount: 2,
                angle: 120,
                spread: 55,
                origin: { x: 1 },
                colors: colors,
              });

              if (Date.now() < end) {
                requestAnimationFrame(frame);
              }
            })();
          }
          leaderboardHasRun = true;
        } else {
          entry.target.classList.remove('in-view');
        }

      });
    }

    const options = {
      root: null,
      rootMargin: '0px',
      threshold: 0.5
    };

    const observer = new IntersectionObserver(handleIntersection, options);

    const animatedElement = document.getElementById('chart');
    observer.observe(animatedElement);

    const stargazerElement = document.getElementById('stargazer');
    observer.observe(stargazerElement);
  </script>
</div>
{% endblock %}